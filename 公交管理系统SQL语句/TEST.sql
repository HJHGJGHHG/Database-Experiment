USE 公交管理系统;
SELECT * FROM 成员信息;
--DELETE FROM 成员信息;
--SELECT name FROM SysUsers WHERE islogin='1';

/*
DROP LOGIN 易伟泽;
DROP USER 易伟泽;
DROP LOGIN 康高卓;
DROP USER 康高卓;
DROP LOGIN 谢阳霁;
DROP USER 谢阳霁;
*/

--SELECT CURRENT_USER;
--ALTER LOGIN 谢阳霁 WITH PASSWORD=N'29597';
--UPDATE 用户信息 SET 密码='29597' WHERE 用户名 IN (SELECT 工号 FROM 成员信息 WHERE 姓名='谢阳霁');

--ALTER LOGIN 康高卓 WITH PASSWORD=N'71720';
--UPDATE 用户信息 SET 密码='71720' WHERE 用户名 IN (SELECT 工号 FROM 成员信息 WHERE 姓名='康高卓');


--DELETE  FROM 车队表;
--INSERT INTO 车队表 VALUES('M01','10010',3);

/*
INSERT INTO 成员信息 VALUES ('10010','谢阳霁','女',25,'2016-11-04','M01','L01','队长');
INSERT INTO 用户信息(用户名,密码) VALUES('10010','29597');
CREATE LOGIN 谢阳霁 WITH PASSWORD='29597', DEFAULT_DATABASE=公交管理系统;
USE 公交管理系统;
CREATE USER 谢阳霁 FOR LOGIN 谢阳霁 WITH DEFAULT_SCHEMA=dbo;
EXEC SP_ADDROLEMEMBER 'db_owner', 谢阳霁;

INSERT INTO 成员信息 VALUES ('10011','康高卓','男',43,'2019-12-19','M01','L01','路队长');
INSERT INTO 用户信息(用户名,密码) VALUES('10011','71720');
CREATE LOGIN 康高卓 WITH PASSWORD='71720', DEFAULT_DATABASE=公交管理系统;
USE 公交管理系统;
CREATE USER 康高卓 FOR LOGIN 康高卓 WITH DEFAULT_SCHEMA=dbo;
EXEC SP_ADDROLEMEMBER 'db_owner', 康高卓;

INSERT INTO 成员信息 VALUES ('10012','易伟泽','男',33,'2018-3-10','M01','L01','司机');
INSERT INTO 用户信息(用户名,密码) VALUES('10012','99461');
CREATE LOGIN 易伟泽 WITH PASSWORD='99461', DEFAULT_DATABASE=公交管理系统;
USE 公交管理系统;
CREATE USER 易伟泽 FOR LOGIN 易伟泽 WITH DEFAULT_SCHEMA=dbo;
EXEC SP_ADDROLEMEMBER 'db_owner', 易伟泽;
*/

--INSERT INTO 线路表 VALUES ('L03','M01');

--INSERT INTO 线路成员表 VALUES('10011','L01','路队长');
--INSERT INTO 线路成员表 VALUES('10012','L01','司机');

--UPDATE 成员信息 SET 车队号='M01';
UPDATE 成员信息 SET 线路号='L01',职位='路队长' WHERE 工号=10011;
